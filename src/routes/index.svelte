<script>


  import { tap } from '@sveltejs/gestures';

  import { TweenLite, Elastic, Circ } from "gsap";


	import Cabecera from '../componentes/general/Cabecera/Cabecera.svelte';
	import Pie from '../componentes/general/Pie/Pie.svelte'

  import FamiliaVentana from "../componentes/contenedores/Lenguas/FamiliaVentana.svelte";
  import TwitterVentana from "../componentes/contenedores/Twitter/Twitter.svelte";
  import Informacion from "../componentes/contenedores/Informacion/Informacion.svelte";
  import Homenaje from "../componentes/contenedores/Homenaje/Homenaje.svelte";
  
  import VolutaTexto from "../componentes/VolutaTexto.svelte";

  import Ventanas from "../componentes/contenedores/Ventanas/Ventanas.svelte";

  import Drag from "../componentes/general/DragDrop/Drag.svelte";
  import Mapa from "../componentes/Mapa/Mapa.svelte";

  import { fade } from "svelte/transition";


  import posDrag from "../datos/posDrag.js"



  import FondoLineas from "../componentes/animacion/FondoLineas.svelte";
  
	import CanvasSetup from "../componentes/animacion/CanvasSetup.svelte";
	import GSAP1 from "../componentes/animacion/GSAP1.svelte";
	import FormaAudio from "../componentes/animacion/FormaAudio.svelte";
	import FraseViva from "../componentes/animacion/FraseViva.svelte";

	import { onMount } from "svelte"

  let canvas;
  let canvas2;
  
  let familiasModule
  
  const win = window;

  $: height = win.innerHeight;
  $: width = win.innerWidth;

  $: familias = familiasModule ? familiasModule.default : [];

	onMount( async ()=>{

    familiasModule = await import("../datos/familias.json");

		// let ctx = canvas.getContext('2d')        
    //     ctx.globalCompositeOperation = 'difference';


	})




  const seleccionar = (e) => {

    const {
      idZona,
      x,
      y,
      idFamilia
    } = {...e.detail}

    console.log(idZona,
      x,
      y,
      idFamilia);
    
    

    if (!!idZona) {
     
      let familia = familias.find(f=>f.id==idFamilia)

      let v = crearVentana("familia",x,y, { familia })
        
    } 
  };


  let mostrarInformacion = false;
  let mostrarTwitter = false;
  let mostrarHomenaje = false;
  let mostrarVolutaTexto = false;

  const crearVentana = (tipo, x, y, props={}) => {
    
    if( ! typeof props == "object") {
      props = {}
    }

    let nuevaVentana = {

      indice:ventanas.length,
      origen: {
          x,
          y
      },
      left: x,
      top: y,
      tipo: tipo,
      props
    }


    if( ventanas.length == 0 ) {
      nuevaVentana.acomodada = true
    }

    ventanas.push( nuevaVentana )
    
    ventanas = ventanas
    
    return nuevaVentana

  }

  const destruirVentana = (ventana) => {
    ventanas = ventanas.filter(v=>v.indice!=ventana.indice)
  }


  const alternarTwitter = (x,y) => {
    // mostrarTwitter = !mostrarTwitter;
    let ventana = ventanas.find(v=>v.tipo=="twitter")

    if( ! ventana ) {
      crearVentana("twitter",x,y)
    } else {
      destruirVentana(ventana)
    }

  }



  const alternarInformacion = (x,y) => {
    
    let ventana = ventanas.find(v=>v.tipo=="informacion")
    let otra = ventanas.find(v=>v.tipo=="homenaje")
    
    if( ! ventana ) {
      crearVentana("informacion",window.innerWidth-(240+80),48)
    } else {
      destruirVentana(ventana)
    }
    
    if( !! otra ) {
      destruirVentana(otra)
    }

  }
  const alternarHomenaje = (x,y) => {
    
    let ventana = ventanas.find(v=>v.tipo=="homenaje")
    let otra = ventanas.find(v=>v.tipo=="informacion")

    if( ! ventana ) {
      crearVentana("homenaje",window.innerWidth-(240+80),48)
    } else {
      destruirVentana(ventana)
    }
    
    if( !! otra ) {
      destruirVentana(otra)
    }

  }

  const alternarVolutaTexto = (x,y) => {
    // mostrarVolutaTexto = !mostrarVolutaTexto;
    console.log("alternarVolutaTexto",mostrarVolutaTexto);
  }

  const CerrarTwitter = () => {
    mostrarTwitter = false;
    
  };
  const tapBotones = (e) => {
    if(e.target.getAttribute("class").includes("TwitterBoton") ) {
      alternarTwitter(e.detail.x,e.detail.y)
    }

    if(e.target.getAttribute("class").includes("VolutaBoton") ) {
      alternarVolutaTexto(e.detail.x,e.detail.y)
    }

    if(e.target.getAttribute("class").includes("HomenajeBoton") ) {
      alternarHomenaje(e.detail.x,e.detail.y)
    }

    if(e.target.getAttribute("class").includes("InformacionBoton") ) {
      console.log("InformacionBoton");
      
      alternarInformacion(e.detail.x,e.detail.y)
    }
    
  }



  let ventanas = []
  

  const cerrarVentana = (e) => {
    let cerrarEvento = e.detail.e
    console.log("cV",cerrarEvento);
    
    if( !! cerrarEvento && !! cerrarEvento.detail ) {
      let familiaId = cerrarEvento.detail.familia

      if(!!familiaId) {
        let p = posDrag.find(p=>p.id==familiaId)
  
        let item = document.getElementById(`${familiaId}-drag`)
        let drop = document.getElementById(`${familiaId}-drop`)
        drop.style.fillOpacity=0 
        drop.style.strokeOpacity=0 
        // item.style.webkitTransform = 
        // item.style.transform = `translate( ${p.posicion[0]}px, ${ p.posicion[1]}px)`

  console.log("to!!");
  
        TweenLite.set(item,{
          x:item.getBoundingClientRect().left,y:item.getBoundingClientRect().top,ease: Circ.ease          
        })
        TweenLite.to(item,1.3,{
          x:p.posicion[0],y:p.posicion[1],ease: Circ.ease          
        })
        TweenLite.fromTo(
          item,3,
          {rotation:90, ease: Elastic.easeIn, transformOrigin:"50% 50%"},
          {rotation:0, ease: Elastic.easeOut, transformOrigin:"50% 50%"}
        )
        
        setTimeout(() => {
          item.style.webkitTransform = item.style.transform = `translate(${p.posicion[0]}px, ${p.posicion[1]}px)`;

        }, 600)
        // item.setAttribute("data-x", p.posicion[0]);
        // item.setAttribute("data-y", p.posicion[1]);
        // console.log("cerrar familiaId",familiaId, item, p);

      }
    }

    
    destruirVentana(e.detail.ventana)

  }

</script>

<style>

	main {
		background-color: transparent;
		box-sizing: border-box;
		position: fixed;
    z-index: 0;
		padding: 1rem;
		margin: 0 auto;
		height: 100%;
		width: 100%;
		color: var(--color-texto);
  }
  
	
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    /* opacity: 0.5; */
  }

  #texto {
    visibility: hidden;
  }
  
  #fondoLineas {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 1;
		z-index: -1;
  }

</style>


  <svg id="svg-intersecciones-familias"
  viewBox="37.47777777777779 37.591661213362585 35.5 19.959004392386532"
  width={width + 'px'}
  height={height + 'px'}
  ></svg>
  
  <svg id="svg-intersecciones"></svg>



  {#if !! canvas }

    <CanvasSetup canvas={canvas}/>
    <GSAP1 canvas={canvas}/>
    <FondoLineas canvas={canvas}/>

    <FraseViva/>
    <FraseViva/>
    <FraseViva/>

    <FormaAudio canvas={canvas} x={100} escala={20} path={ "M52.881976888888886,47.948643555555556 52.904099555555554,47.85856711111111 52.73422222222222,47.83347911111111 52.848988444444444,47.73629866666667 53.00760177777777,47.885631999999994 53.07160177777778,47.54093511111111 53.19111111111111,47.440000000000005 52.99081244444445,47.394176 53.12573155555556,47.33649066666667 53.07713422222222,47.09096533333334 53.22390044444444,47.36928711111111 53.45284266666666,47.500643555555556 53.39298844444444,47.55496533333333 53.273087999999994,47.413333333333334 53.20652088888889,47.49550933333333 53.329976888888886,47.75684266666667 53.13462044444445,47.92197688888889 53.291456,47.924544 53.47950933333334,47.48246755555556 53.64175879780515,47.45490602504606 53.56819911111111,46.916543999999995 53.66041121927954,47.44716853125877 53.76315733333333,47.30804622222222 53.83545599999999,47.40523377777778 54.09915733333333,47.229824 53.85204622222222,47.51466666666666 53.88503466666667,47.691854222222226 54.41086577777778,47.72543288888889 53.90913422222222,47.96503466666666 53.74044444444445,47.917034666666666 53.77224533333334,48.204842666666664 53.64878933333334,48.56434488888889 53.812544,48.848 53.64128711111111,48.48395377777778 53.38409955555555,48.44898844444444 53.233578666666666,48.554467555555554 53.25293511111111,48.76167822222222 52.90391127323358,48.545386984370914 52.873087999999996,48.19950933333334 52.92622222222222,48.422912 53.253731555555554,48.152490666666665 53.305088,48.29609955555556 53.46620962159058,48.32021563719203 53.24839822222222,48.02350933333334 53.16681244444444,48.13392355555556 53.008199111111104,47.93125688888889 52.881976888888886,47.948643555555556 M53.58103466666667,47.89452088888889 53.537187555555555,47.93876622222222 53.63729812490866,47.94077546838 53.58103466666667,47.89452088888889 M53.41353244444444,47.92177777777778 53.46488888888889,47.923157333333336 53.466923650061176,47.917075002433286 53.41353244444444,47.92177777777778 M53.53743698481607,47.41958324575592 53.52731022222222,47.43723377777777 53.521926412295414,47.49345929918555 53.532444444444444,47.496490666666666 53.53743698481607,47.41958324575592 M47.75347911111111,42.473678222222226 48.06321066666667,41.65195377777778 47.626666666666665,41.45204622222222 47.74795377777778,41.343011555555556 48.371953777777776,41.566812444444444 48.16434488888889,41.75209955555555 48.47268977777778,42.15921066666667 48.242368,42.157824000000005 48.039509333333335,41.986176 47.75347911111111,42.473678222222226 M50.81560177777778,43.55377777777778 50.454912,43.908145777777776 50.80434488888889,43.27328711111111 50.75160177777778,43.07022222222222 50.947953777777784,42.73501155555555 50.78321066666666,43.22706488888889 51.099455999999996,43.242666666666665 50.85906488888889,43.26478933333333 50.81560177777778,43.55377777777778 M50.87664355555556,43.772643555555554 50.87328711111111,43.58913422222222 51.320490666666664,43.41096533333333 51.094712888888886,43.68493511111111 50.940444444444445,43.68414577777778 51.020245333333335,43.88385422222222 50.87664355555556,43.772643555555554 M50.54715733333334,43.82893511111111 50.815800888888894,43.77678933333333 50.753379555555554,43.839999999999996 50.54715733333334,43.82893511111111 M51.89195377777778,45.725632000000004 51.72266666666667,45.412544 51.41787733333333,45.39022222222222 51.51312670528353,45.24066588849099 51.393187555555556,45.340245333333336 51.19426844444445,45.203356444444445 51.271111111111104,45.08049066666667 51.18735644444444,44.94281244444444 51.33984563731065,44.733824 51.19684266666666,44.87743288888889 51.08029866666667,44.85826844444445 51.04888888888888,44.696298666666664 50.78597688888888,44.728490666666666 50.822712888888894,44.347854222222225 50.72652088888889,44.39288888888888 50.454912,43.908145777777776 50.72,44.06123377777778 50.82468977777777,43.94567822222222 50.80750933333333,44.177379555555554 51.073379555555555,44.08967822222222 51.236543999999995,44.290368 51.221333333333334,44.133731555555556 51.29580088888889,44.152490666666665 51.25056711111112,44.38281244444445 51.381532444444446,44.448398222222224 51.52177777777778,44.33501155555555 51.74478933333333,44.38321066666666 51.299157333333326,44.33876622222222 51.435455999999995,44.03634488888889 51.35387733333334,43.89076622222222 51.24957866666667,43.97985422222222 51.164842666666665,43.91743288888889 51.37521066666667,43.814912 51.298176,43.71575466666666 51.497088,43.667157333333336 51.56187733333333,43.452444444444446 51.62547911111111,43.718321777777774 51.757432888888886,43.70488888888889 51.896490666666665,43.48642133333333 51.83684266666667,43.27743288888889 52.02468977777777,43.42874311111111 52.00355555555555,43.69007644444445 52.19950933333333,43.76652088888889 51.77836799999999,43.83802311111111 51.64404622222223,44.00335644444444 51.787854222222215,44.14222222222222 52.09521066666666,44.05728711111111 52.22024533333333,44.204046222222225 51.993287111111115,44.246712888888894 52.10409955555555,44.42864355555555 52.25678933333333,44.443456 51.98973155555556,44.38537955555555 52.086520888888884,44.614912 51.91889656794463,44.48264352962831 51.96997688888889,44.73303466666667 52.220444444444446,44.74390044444444 52.308743111111106,44.862023111111114 52.33580088888888,44.70913422222222 52.50192355555556,44.95802311111111 52.31802311111111,45.28474311111111 51.884842666666664,44.94478933333333 51.97747911111111,45.186766222222225 52.273578666666666,45.36395377777777 52.17955555555555,45.68928711111111 51.93619911111111,45.72029866666667 51.92632177777777,45.636344888888885 51.89195377777778,45.725632000000004 M50.819168473835894,44.5168230456517 50.88849066666667,44.481578666666664 50.852544,44.429823999999996 50.819168473835894,44.5168230456517 M50.852881044828884,44.42429021008842 50.882368,44.38933333333333 50.89935644444444,44.345088000000004 50.852881044828884,44.42429021008842 M51.51214556731462,45.36311329900368 51.51624533333334,45.36355555555556 51.51603302289519,45.36179120288404 51.51214556731462,45.36311329900368 M51.51976968309033,45.23422832137902 51.5705013787215,45.23963886013915 51.53619911111111,45.228245333333334 51.54706488888889,45.16306488888889 51.54427968210783,45.155038939146976 51.51976968309033,45.23422832137902 M51.639698160670505,45.07785319895537 51.657479111111115,45.071800888888895 51.67604622222222,45.01076622222222 51.65531022222223,45.003456 51.639698160670505,45.07785319895537 M51.63321339830171,45.04966826868539 51.57115733333333,45.07022222222222 51.54311111111111,45.073187555555556 51.54441743036609,45.1238413909866 51.59190044444444,45.094122666666664 51.63321339830171,45.04966826868539 M51.41098888344968,44.47979910211938 51.39555555555556,44.521088000000006 51.387456,44.553088 51.38945539881342,44.56875675804796 51.39298844444444,44.54656711111111 51.40642133333333,44.51693511111111 51.40365511111111,44.50646755555556 51.41098888344968,44.47979910211938 M51.391407917967626,44.58405813264428 51.39164005555555,44.58587733333333 51.39521616597925,44.58587733333333 51.391407917967626,44.58405813264428 M51.87621032181999,44.43771188227159 51.83644444444444,44.39585422222222 51.81770844420998,44.38808044451738 51.801479111111114,44.43081244444444 51.837632,44.463601777777775 51.87621032181999,44.43771188227159 M50.543202806144656,44.54759861302422 50.54084266666666,44.445824 50.203455999999996,44.42331022222223 50.544,44.21629866666667 50.675555555555555,44.456689777777775 50.56355555555556,44.56711111111111 50.70301155555555,44.584689777777776 50.32157866666667,44.96770133333333 50.374912,45.02953244444445 50.471701333333336,44.946176 50.600689777777774,45.02676622222222 50.69787733333334,44.905287111111114 50.96829866666667,45.007210666666666 51.119409777777776,44.92602311111111 51.00464355555555,45.115256888888894 50.722766222222226,45.25688888888889 50.669632,45.64780088888888 51.036046222222225,45.82557866666666 51.23950933333333,46.144398222222215 51.16029866666667,46.164743111111115 50.98528711111111,45.86864355555556 50.908842666666665,45.837632 50.846222222222224,46.01876622222222 50.69155555555555,45.776 50.385976888888884,45.69718755555555 50.40533333333333,45.60078933333333 50.26567822222222,45.684344888888894 50.255601777777784,45.54034488888889 50.409088000000004,45.52513422222223 50.301632000000005,45.358812444444446 50.41955555555556,45.306666666666665 50.33540977777778,45.13007644444444 49.981824,44.97026844444444 49.711210666666666,44.55822222222222 49.56543288888889,44.68997688888889 49.57787733333333,44.40809955555555 49.440000000000005,44.387157333333334 49.326620444444444,44.09896533333333 49.164452732251355,44.098507151026254 49.277632000000004,44.05175466666667 49.14666666666666,43.861333333333334 49.26064355555555,43.88029866666667 49.54153244444444,44.341731555555555 49.640888888888895,44.23131022222222 49.57570133333333,43.965824 49.66893511111111,44.041088 49.628842666666664,44.361087999999995 49.80918755555555,44.322368 50.094222222222214,44.65521066666667 50.543202806144656,44.54759861302422 M49.83086345737511,44.64057589057936 49.83178059628419,44.64206836543723 49.83111111111111,44.64059022222222 49.83086345737511,44.64057589057936 M53.33028977777778,48.23684266666667 53.32957866666667,48.23684266666667 53.32957866666667,48.23613155555555 53.33028977777778,48.23613155555555 53.33028977777778,48.23684266666667 M53.930268444444444,48.48888888888889 53.89590044444445,48.353578666666664 53.78370133333333,48.371157333333336 53.84731022222222,48.15229866666667 54.237233777777774,48.079409777777784 53.98222222222222,48.39585422222222 54.33797688888889,48.317631999999996 54.17185422222222,48.395456 54.17422222222223,48.573823999999995 53.930268444444444,48.48888888888889 M54.118712888888886,48.114368000000006 54.06202311111111,48.114368000000006 54.06202311111111,47.90913422222222 54.118712888888886,47.90913422222222 54.118712888888886,48.114368000000006 M58.41995377777778,50.14735644444445 58.425728301278724,49.99321446257316 58.296490666666664,49.936 58.33580088888888,50.70281244444445 58.12997688888888,50.69333333333333 58.091064888888894,50.59634488888889 57.81807644444444,50.67456711111111 57.782912,50.548344888888884 57.998222222222225,50.34824533333334 58.262712888888885,49.744398222222216 58.12424533333333,49.66419911111112 58.034176,49.37007644444444 57.95535644444444,49.529087999999994 57.946076444444444,49.25313422222222 58.091113962906135,49.188022520743914 57.83822222222222,49.25945599999999 57.90301155555555,49.20592355555556 57.60039822222222,49.023800888888886 57.70212266666666,48.939064888888886 57.538368,48.85609955555556 57.41728711111111,48.373333333333335 57.56167822222223,48.09244444444444 57.52612266666666,48.23664355555555 57.61165511111111,48.26923377777777 57.70468977777778,48.267064888888896 57.71911111111111,48.100544 58,48.15407644444444 57.90913422222222,48.308145777777774 57.98360177777778,48.326912 58.08592355555555,48.23684266666667 57.899655111111116,48.08395377777778 58.17462044444444,48.07131022222222 58.31604622222222,48.199900444444445 58.25339520039468,48.28055544569619 58.751517782025765,48.83503769077388 58.890624711111116,49.33510968888889 59.43749973333333,49.892224 59.67968782222222,50.43733262222222 60.509432888888895,51.01392355555556 60.5410149086516,50.855757406083505 60.42286782561649,50.792480493692125 60.529797037438705,50.81451886725006 60.716046222222225,51.10143288888889 60.99377777777777,51.221731555555564 60.602666666666664,51.42459022222223 60.557034666666674,51.244643555555555 60.181762119516414,51.084896425765976 60.059655111111105,51.35624533333333 59.751310222222216,51.06864355555555 59.22816908019685,50.83534098407495 59.033479111111106,51.12098844444445 58.36404622222222,51.336099555555556 58.99614577777778,51.076145777777775 58.51140977777778,50.719011555555554 58.52777648137468,50.15561958825105 58.41995377777778,50.14735644444445 M58.13165699170558,49.16253907249821 58.162176,49.08839822222223 58.13452088888889,49.099455999999996 58.13165699170558,49.16253907249821 M58.170730456508025,49.061241608635726 58.17499935945745,49.05236088932913 58.17343288888888,49.05363200000001 58.170730456508025,49.061241608635726 M58.188577821269114,49.00838455416135 58.194368000000004,48.989632 58.18864355555556,48.98331022222222 58.18607644444444,48.978368 58.18547911111111,48.97125688888889 58.17264355555555,48.968099555555554 58.13432177777778,48.970666666666666 58.126734971923206,48.96723134568395 58.13293511111112,48.97343288888889 58.1831111111111,49.00681244444444 58.188577821269114,49.00838455416135 M58.06214980840461,48.95303887191939 58.015409777777776,48.95308800000001 58.00612266666667,48.943601777777786 58.00395377777778,48.93807644444444 57.96538883550368,48.89978467534806 57.97175466666666,48.913777777777774 57.978268444444446,48.917731555555555 57.99802311111111,48.941632 58.00474311111111,48.94557866666666 58.012046222222224,48.95288888888889 58.036544,48.95862044444445 58.03970133333333,48.957632000000004 58.05155555555556,48.959999999999994 58.06214980840461,48.95303887191939 M57.949939575674165,48.842914538967825 57.952789333333335,48.838712888888885 57.960490666666665,48.834567111111106 57.98084266666667,48.82804622222222 57.980444444444444,48.804935111111114 58.002567111111105,48.792490666666666 58.011455999999995,48.770368000000005 58.036743111111115,48.777877333333336 58.06597688888889,48.722965333333335 58.10686577777778,48.73264355555556 58.13570133333334,48.731456 58.193187555555554,48.73935644444445 58.16315733333333,48.54340977777778 58.16375466666666,48.49560177777778 58.15822222222222,48.48078933333333 58.117333333333335,48.43575466666667 58.08059022222223,48.47842133333334 58.043064888888885,48.42192355555556 58.00137955555556,48.377479111111114 57.96957866666667,48.443854222222214 57.90064355555556,48.38222222222222 57.93265358393781,48.37199374257446 57.859157333333336,48.35022222222223 57.853632,48.37175466666667 57.853823999999996,48.40355555555555 57.79555555555556,48.41777777777778 57.76256711111111,48.411256888888886 57.72009955555556,48.44523377777777 57.70706488888889,48.47703466666666 57.67604622222222,48.49501155555556 57.64404622222223,48.509432888888895 57.62370133333334,48.571456 57.647210666666666,48.596543999999994 57.652935111111105,48.61471288888889 57.65234488888889,48.62814577777778 57.72246755555555,48.63170133333333 57.73234488888889,48.621233777777775 57.73846755555556,48.61096533333334 57.753088000000005,48.625187555555556 57.765532444444446,48.627356444444445 57.786467555555554,48.625976888888886 57.81570133333334,48.615509333333335 57.84059022222222,48.59871288888888 57.85876622222222,48.59693511111111 57.85896533333334,48.622421333333335 57.85619911111111,48.64987733333333 57.87713422222222,48.664490666666666 57.87871288888889,48.682268444444446 57.88365511111111,48.68997688888889 57.90715733333333,48.707953777777774 57.93955555555556,48.74192355555555 57.94211845178616,48.799756725509624 57.961088,48.8 57.97728711111111,48.80315733333334 57.94646755555555,48.830222222222226 57.949939575674165,48.842914538967825 M57.86563726276596,48.85980615283688 57.867456,48.865578666666664 57.87614577777777,48.87624533333333 57.87496533333333,48.88573155555555 57.88286577777777,48.89343288888889 57.88254223804413,48.89731828046495 57.88424533333333,48.896398222222224 57.887409777777776,48.884145777777775 57.86563726276596,48.85980615283688 M58.2588033593417,49.96591728581188 58.235395473066326,49.962679273227394 58.04022513207328,50.38524523103057 58.03970133333333,50.39604622222222 58.04464355555556,50.40256711111111 58.070520888888886,50.46242133333333 58.098175999999995,50.453923555555555 58.11101155555556,50.45846755555556 58.11852088888889,50.45728711111111 58.12147911111111,50.45511111111111 58.17086577777778,50.458076444444444 58.19693511111111,50.416789333333334 58.198712888888885,50.410666666666664 58.20662044444445,50.41106488888889 58.219256888888886,50.40197688888889 58.22775466666666,50.394865777777774 58.23802311111111,50.38222222222222 58.24044696490431,50.37645726859424 58.22715733333333,50.394076444444444 58.22281244444444,50.396842666666664 58.19022222222222,50.40434488888889 58.17501155555556,50.39822222222222 58.16809955555556,50.384398222222224 58.15506488888889,50.32553244444444 58.17422222222223,50.26567822222222 58.20424533333334,50.23664355555555 58.226176,50.242176 58.25184976293359,50.266800930296476 58.2588033593417,49.96591728581188 M58.24424005886486,50.37142844675289 58.249479111111114,50.36937955555556 58.249595859812686,50.36432781358526 58.24424005886486,50.37142844675289 M58.74567949283222,49.06752976290559 58.56481374905072,48.786452278222804 58.532935111111115,48.78577777777778 58.47071288888889,48.788935111111115 58.462332047097384,48.8006009279472 58.457088,48.811256888888884 58.555456,48.88493511111111 58.74567949283222,49.06752976290559 M58.446563117655835,48.82487065330921 58.411854222222225,48.851754666666665 58.39190044444444,48.861824 58.381824,48.880398222222226 58.41026844444444,48.92642133333333 58.455900444444445,48.94874311111111 58.461432888888886,48.971455999999996 58.47684266666666,48.99062044444444 58.49698844444445,48.98034488888889 58.5068708026487,48.96462718798078 58.446563117655835,48.82487065330921 M58.614861767105076,49.214884563471905 58.60009955555556,49.241877333333335 58.592199111111114,49.27940977777778 58.67505025964062,49.35436488252025 58.614861767105076,49.214884563471905 M60.58998028223792,50.95906778978355 60.590958592318394,50.9698960979648 60.59239822222222,50.96493511111112 60.58998028223792,50.95906778978355 M58.26011508798947,49.90915849899822 58.256354551789265,49.917300487033934 58.25997466090741,49.91523480969466 58.26011508798947,49.90915849899822 M58.38215873290174,49.50464829034914 58.38735644444444,49.49886577777778 58.39209955555555,49.49688888888889 58.395655111111104,49.503409777777776 58.413632,49.51131022222223 58.463601777777775,49.474368 58.48296533333333,49.515854222222224 58.50067910907985,49.538077466901115 58.49695047492734,49.453102856845724 58.451754666666666,49.42202311111111 58.43713422222223,49.40997688888889 58.41501155555555,49.343011555555556 58.40078933333333,49.325233777777775 58.386176,49.28553244444445 58.38024533333333,49.26281244444444 58.37787733333334,49.24246755555556 58.39299541337593,49.202511836295315 58.36207644444444,49.20790044444445 58.35575466666667,49.284544 58.38380088888889,49.337088 58.36424533333333,49.36553244444445 58.30973155555555,49.384298666666666 58.286620444444445,49.32839822222222 58.27337955555556,49.31377777777777 58.270812444444445,49.31278933333333 58.253432888888895,49.31832177777778 58.21195377777778,49.32701155555555 58.206232099563344,49.33127585266596 58.38215873290174,49.50464829034914 M58.49076356862762,49.31210485898286 58.48798559353453,49.24879552354696 58.48098844444444,49.25945599999999 58.46518755555555,49.27822222222222 58.49076356862762,49.31210485898286 M58.46241782175443,49.199946407609815 58.44799999999999,49.19268977777778 58.437663936663085,49.20053004431888 58.46241782175443,49.199946407609815 M58.434907799320335,49.2005950273679 58.42666666666666,49.19664355555556 58.41831397093601,49.19809927694074 58.42666666666666,49.20078933333333 58.434907799320335,49.2005950273679 M60.69696601592326,51.12866774245053 60.69511111111112,51.124344888888885 60.68804544479127,51.1258707428996 60.69696601592326,51.12866774245053 M60.687504132253906,51.12570101711618 60.669632,51.11229866666667 60.64950136887532,51.113785444611764 60.687504132253906,51.12570101711618 M59.01350019525604,50.58542742828985 59.01951450099926,50.51363033127862 59.00365511111111,50.542023111111114 59.008,50.558421333333335 59.013532444444444,50.56592355555555 59.01350019525604,50.58542742828985 M59.02371954186341,50.46343173151516 59.038812444444446,50.28325688888889 59.05966963142554,50.06238229329658 58.94024533333334,49.99842133333334 58.94478933333333,49.979456 58.85709316743869,49.77622962427581 58.84839822222222,49.78547911111111 58.822122666666665,49.84434488888889 58.81876622222223,49.846911999999996 58.816590222222224,49.846911999999996 58.79842133333334,49.89807644444445 58.795472652373206,49.911961500335465 58.81224533333333,49.92849066666667 58.962272386297315,50.307996196094976 58.97737955555556,50.314076444444446 58.99575466666666,50.308145777777774 59.02814577777778,50.28937955555555 59.01925688888889,50.30715733333333 58.98409955555555,50.36147911111111 58.987850013936125,50.37269686791923 58.99298844444444,50.377287111111116 58.992544224272,50.38457125152918 59.02371954186341,50.46343173151516 M58.798528126492094,49.640511478627175 58.79603358172939,49.64151620064913 58.80167412265279,49.647801984332396 58.798528126492094,49.640511478627175 M58.553721312792106,50.19690962990662 58.575011555555555,50.70024533333333 58.59259022222223,50.722367999999996 58.67733333333334,50.80098844444444 58.70123377777777,50.80414577777778 58.70814577777777,50.80711111111111 58.72592355555556,50.80750933333333 58.73915733333333,50.74311111111111 58.782023111111116,50.74745599999999 58.797824,50.756544 58.804935111111114,50.76404622222222 58.855900444444444,50.779256888888895 58.862620444444445,50.78715733333334 58.925824,50.795256888888886 58.968888888888884,50.78755555555556 58.9872355361334,50.78301662341516 58.97995377777778,50.77767822222222 58.97106488888889,50.783601777777776 58.94893511111111,50.777877333333336 58.94281244444444,50.78715733333334 58.93471288888889,50.788935111111115 58.925432888888885,50.78775466666667 58.868935111111114,50.75062044444444 58.840689777777776,50.718222222222224 58.813632,50.70380088888889 58.80118755555556,50.70577777777778 58.779455999999996,50.68187733333333 58.793678222222226,50.66093511111111 58.806321777777775,50.598912 58.553721312792106,50.19690962990662 M59.04884645196431,50.80949013294184 59.087011555555556,50.818176 59.107754666666665,50.820145777777775 59.11371205864885,50.82212493705804 59.10262044444445,50.81481244444445 59.084245333333335,50.815210666666665 59.063701333333334,50.806912000000004 59.05303466666666,50.80573155555555 59.04884645196431,50.80949013294184 M58.61286967507299,49.73200964937355 58.61886577777777,49.72484266666667 58.63862044444444,49.71002311111111 58.63879404628087,49.70484720450655 58.62004622222222,49.71239822222223 58.630912,49.680988444444445 58.59745626479939,49.44203335033851 58.566911999999995,49.45777777777778 58.551509333333335,49.47160177777778 58.53392355555555,49.467655111111114 58.52269705220377,49.46344603345846 58.53062868686232,49.650962679207694 58.61286967507299,49.73200964937355 M58.59020566803461,49.390246503573294 58.57678933333333,49.29442133333333 58.515806173728734,49.30053454376837 58.517548945138394,49.34173647289328 58.526023111111115,49.351111111111116 58.52207644444445,49.398122666666666 58.547356444444446,49.41886577777778 58.59020566803461,49.390246503573294 M58.49000252577788,48.67019062455678 58.24414614882047,48.28811334124382 58.22893511111111,48.30301155555555 58.22715733333333,48.31032177777778 58.22953244444444,48.37293511111111 58.21392355555556,48.39506488888889 58.20622222222222,48.44642133333333 58.189632,48.47387733333334 58.19140977777778,48.524046222222225 58.29728711111111,48.61452088888889 58.32533333333333,48.66271288888889 58.29392355555556,48.688 58.26765511111111,48.69056711111111 58.232298666666665,48.70459022222222 58.209578666666665,48.76167822222222 58.26686577777778,48.79763199999999 58.284444444444446,48.79822222222222 58.35180088888889,48.78518755555555 58.36681244444444,48.78715733333334 58.37965511111111,48.794467555555556 58.42725688888889,48.74864355555555 58.45570133333333,48.71703466666667 58.49000252577788,48.67019062455678 M58.502153229189965,49.571672283772045 58.46934501033989,49.590568751425074 58.50450269477249,49.625215998051175 58.502153229189965,49.571672283772045 M60.38700936056949,50.77327550874472 60.21399863242247,50.699003005759664 60.33593742222222,50.696041244444444 60.38700936056949,50.77327550874472 M53.748543999999995,50.39802311111111 53.654911999999996,50.323754666666666 53.87812266666666,50.33382399999999 54.07604622222222,50.51555555555555 54.346666666666664,50.21333333333333 54.38004622222223,50.30557866666667 54.23901155555556,50.656 53.748543999999995,50.39802311111111 M57.08325688888889,51.380935111111114 56.93747911111112,50.97540977777778 56.73363200000001,50.928199111111105 56.873678222222225,50.84503466666667 57.014122666666665,50.96849066666667 57.213824,50.77274311111111 57.513088,51.06765511111111 57.66617599999999,50.921877333333335 57.68809955555556,51.03842133333333 57.55121066666666,51.08997688888889 57.66814577777778,51.184789333333335 57.90340977777778,51.292842666666665 57.96918755555556,51.225287111111115 57.90557866666667,51.669333333333334 57.739456000000004,51.63259022222222 57.68256711111111,51.769088 57.27684266666666,51.40404622222222 57.22429866666667,51.45856711111111 57.20157866666666,51.329187555555556 57.08325688888889,51.380935111111114 M53.842766222222224,50.256988444444445 53.89590044444445,50.13076622222223 53.97293511111111,50.16592355555555 53.842766222222224,50.256988444444445 M54.27595377777777,50.78577777777778 54.306176,50.65481244444444 54.43773155555556,50.80414577777778 54.518712888888885,50.592199111111114 54.64177777777778,50.64750933333334 54.46222222222222,50.924643555555555 54.658965333333335,50.89303466666667 54.89963714971698,51.13121486687669 54.39133210770263,50.944784700146776 54.27595377777777,50.78577777777778 M57.43209955555556,50.80868977777778 57.60355555555555,50.70755555555556 57.62587733333333,50.57540977777777 57.685731555555556,50.72 57.43209955555556,50.80868977777778 M57.394368,50.87407644444444 57.367900444444444,50.58824533333333 57.42874311111111,50.57343288888888 57.394368,50.87407644444444 M61.45639822222223,51.208298666666664 61.136398222222226,51.05323377777778 61.545088,51.11407644444444 61.77935644444444,51.01471288888889 61.63337955555556,51.223310222222224 61.45639822222223,51.208298666666664 M56.89935644444444,50.460842666666665 56.97402311111111,50.369187555555555 56.95723377777777,50.46321066666666 56.89935644444444,50.460842666666665 M57.53777777777778,50.35318755555555 57.66537955555555,50.08493511111111 57.404444444444444,49.89115733333334 57.61737955555555,49.924544 57.796145777777774,50.12286577777778 57.53777777777778,50.35318755555555 M57.25807644444445,50.394076444444444 57.37659022222222,50.044444444444444 57.30567822222223,50.08019911111111 57.39377777777777,50.38537955555555 57.25807644444445,50.394076444444444Z" }/>
    <FormaAudio canvas={canvas} x={30} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={500} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={600} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={700} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={330} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={530} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={630} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={730} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={360} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={560} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={660} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={760} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>
    <FormaAudio canvas={canvas} x={900} escala={50} path={ "M45.39773155555555,41.971555555555554 45.10512761608537,41.39690955077487 44.88829866666667,41.21975466666667 45.06041802456019,41.233983086408905 44.85925688888889,41.08859022222222 45.10795377777777,41.174912 45.10676622222222,40.905877333333336 45.00208214649592,40.899306766678095 45.29234112362121,40.86307367214778 45.159310222222224,41.166222222222224 45.417088,41.29125688888889 45.53567269824406,41.528580422433244 45.688490666666674,41.412544 45.63990044444445,41.58222222222222 45.836643555555554,41.72187733333333 45.63733333333333,41.83920104091928 45.63733333333333,42.253432888888895 45.50735644444445,41.990520888888895 45.39773155555555,41.971555555555554 M45.63733333333333,41.476544000000004 45.63733333333333,41.49063779324569 45.64128711111111,41.48681244444444 45.63733333333333,41.476544000000004 M45.37720227283814,41.39754580443098 45.378766222222225,41.35111111111111 45.3307618130324,41.359145529459134 45.37720227283814,41.39754580443098 M46.00928711111111,41.13303466666667 45.895766577168615,40.78774793470834 46.39111111111111,40.90547911111111 46.028643555555554,41.12592355555555 46.23565511111111,41.227456 46.31147737048652,41.74551497976456 46.00928711111111,41.13303466666667 M46.33284323213088,41.89149818544116 46.33935644444445,41.936 46.28420010024742,41.79032415237587 46.33284323213088,41.89149818544116Z" }/>
    <FormaAudio canvas={canvas} x={1100} path={ "M30 30 L75 200 L125 170 L225 200 Z" }/>

    
  {/if}

<svelte:head>
  <title>INALI | Mapa interactivo</title>
</svelte:head>


<Cabecera
  {
    ...{
      alternarInformacion,
      alternarHomenaje,
    }
  }
  on:tap={(e)=>tapBotones(e)} 
/>

<svg
  viewBox="37.47777777777779 37.591661213362585 35.5 19.959004392386532"
  width={width + 'px'}
  height={height + 'px'}
  id="fondoLineas">
  
</svg>
<!--  -->

<main>
  <!-- Interactividad -->
  <Drag />




  <!-- Elementos -->
  <Mapa on:seleccionar={seleccionar} on:tap={(e)=>tapBotones(e)} canvas={canvas}/>
  <!-- <Mapa on:seleccionar={console.log("aosijvieurn")}/> -->

  <!-- 
    <div class="FamiliaVentana" transition:fade>
    </div>
  {/if}
  {#if mostrarTwitter }
    <div class="TwitterVentana" transition:fade>
        <TwitterVentana on:click={()=>alternarTwitter()}/>
    </div>
  {/if} -->

  <Ventanas ventanas={ventanas} on:cerrar={cerrarVentana}/>

  <!-- {#if mostrarInformacion }
    <div class="Informacion" transition:fade>
      <Informacion on:click={()=>alternarInformacion()}/>
    </div>
  {/if}
  {#if mostrarHomenaje }
    <div class="Homenaje" transition:fade>
      <Homenaje on:tap={()=>alternarHomenaje()}/>
    </div>
  {/if} -->


  {#if mostrarVolutaTexto }
  <!-- <div class="VolutaTexto" transition:fade>
    <VolutaTexto/>
  </div> -->
  {/if}


  <canvas id="fondo" bind:this={canvas}></canvas>

</main>





<Pie />
        


